{% extends 'layouts/base-fullscreen.html' %}

{% block title %} Illustration de connexion Auth {% endblock title %}

<!-- Les styles spécifiques vont ICI -->
{% block stylesheets %}
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
{% endblock stylesheets %}

{% block content %}

<main class="main-content  mt-0">
  <section>
    <div class="page-header min-vh-100">
      <div class="container">
        <div class="row">
          <div class="col-xl-4 col-lg-5 col-md-7 d-flex flex-column mx-lg-0 mx-auto">
            <div class="card card-plain">
              <div class="card-header pb-0 text-start">
                <h4 class="font-weight-bolder">Connexion</h4>
                <p class="mb-0">Entrez votre email et votre mot de passe pour vous connecter</p>
              </div>

              <!-- Ajout des messages de succès ou d'erreur -->
              {% if success_message %}
              <div class="alert alert-success" role="alert">
                {{ success_message }}
              </div>
              {% endif %}

              {% if error_message %}
              <div class="alert alert-danger" role="alert">
                {{ error_message }}
              </div>
              {% endif %}
              <div class="card-body">
                <div class="mb-2 position-relative text-center">
                  {% if msg %}
                  <div class="alert alert-success" id="success_message">
                    <strong>{{ msg | safe }}</strong>
                  </div>
                  {% endif %}
                </div>
                <form role="form" class="text-start" method="post" action="">
                  {{ form.hidden_tag() }}
                  <div class="mb-3">
                    {{ form.username(placeholder="Nom d'utilisateur", class="form-control") }}
                  </div>
                  <div class="mb-3">
<<<<<<< HEAD
                    {{ form.password(placeholder="Mot de passe", class="form-control", type="password",id="passwordField") }}
                  </div>
                
=======
                    {{ form.password(id="password-field", placeholder="Mot de passe", class="form-control", type="password") }}
                    <span toggle="#password-field" class="fa fa-fw fa-eye field-icon toggle-password"></span>
                  </div>
                  
>>>>>>> Prince-Gildas
                  <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" id="rememberMe">
                    <label class="form-check-label" for="rememberMe">Se souvenir de moi</label>
                  </div>
                  <div class="text-center">
                    <button type="submit" name="login" class="btn bg-gradient-info w-100 my-4 mb-2">Se
                      connecter</button>
                  </div>
                  <div class="mb-2 position-relative text-center">
                    <p
                      class="text-sm font-weight-bold mb-2 text-secondary text-border d-inline z-index-2 bg-white px-3">
                      ou
                    </p>
                  </div>
                  <div class="text-center">
                    <a href="{{ url_for('authentication_blueprint.register') }}"
                      class="btn bg-gradient-dark w-100 mt-2 mb-4">S'inscrire</a>
                  </div>
                </form>
              </div>
              <div class="card-footer text-center pt-0 px-lg-2 px-1">
                <p class="mb-4 text-sm mx-auto">
                  Vous n'avez pas de compte ?
                  <a href="{{ url_for('authentication_blueprint.register') }}"
                    class="text-primary text-gradient font-weight-bold">S'inscrire</a>
                </p>
                <p class="mb-4 text-sm mx-auto">
                  Mot de passse oublier ?
                  <a href="{{ url_for('authentication_blueprint.password_reset_request') }}"
                    class="text-primary text-gradient font-weight-bold">Reinitialiser le mot de passe</a>
                </p>
              </div>
            </div>
          </div>
          <div
            class="col-6 d-lg-flex d-none h-100 my-auto pe-0 position-absolute top-0 end-0 text-center justify-content-center flex-column">
            <div
              class="position-relative bg-gradient-primary h-100 m-3 px-7 border-radius-lg d-flex flex-column justify-content-center">
              <img src="{{ config.ASSETS_ROOT }}/img/shapes/pattern-lines.svg" alt="pattern-lines"
                class="position-absolute opacity-4 start-0">
              <div class="position-relative">
                <img class="max-width-500 w-100 position-relative z-index-2"
                  src="{{ config.ASSETS_ROOT }}/img/illustrations/drone.png" alt="chat-img">
              </div>
              <h4 class="mt-5 text-white font-weight-bolder">"VOCASARA, Un envol vers l'avenir"</h4>
              <p class="text-white">Inspection et prévention par drone.</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</main>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    const passwordField = document.querySelector('#password-field');
    const togglePassword = document.querySelector('.toggle-password');
  
    togglePassword.addEventListener('click', function() {
      const type = passwordField.getAttribute('type') === 'password' ? 'text' : 'password';
      passwordField.setAttribute('type', type);
  
      // Ajoute ou retire la classe 'fa-eye' pour afficher ou masquer l'icône
      if (type === 'password') {
        this.classList.remove('fa-eye');
        this.classList.add('fa-eye-slash');
      } else {
        this.classList.remove('fa-eye-slash');
        this.classList.add('fa-eye');
      }
    });
  });
  </script>
  
  
{% endblock content %}
<script>
  document.addEventListener('DOMContentLoaded', function () {
      var showPasswordCheckbox = document.getElementById('showPassword');
      var passwordField = document.getElementById('passwordField');

      showPasswordCheckbox.addEventListener('change', function () {
          if (showPasswordCheckbox.checked) {
              passwordField.type = 'text';
          } else {
              passwordField.type = 'password';
          }
      });
  });
</script>

<!-- Le JavaScript spécifique va ICI -->
{% block javascripts %} {% endblock javascripts %}